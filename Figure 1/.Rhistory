pivot_wider(names_from = grp, values_from = Mean) %>%
select(-rn) %>%
rename(`Sample Mean Gray Value` = 'Column1',
`Standard Mean Gray Value` = 'Column2') %>%
mutate(`Colony ID` = str_remove(file_directory, '.csv'), .before = 1)  %>%
add_column(`Tank ID` = paste0('BT',
rep(c(1:8),
each=2)),
.after = 1) %>%
add_column(`Experiment period` = 'Pre-exposure', # Change `Experiment period` as you like
.after = 2) %>%
mutate(Treatment = case_when(`Tank ID` == 'BT1' ~ 'Control',
`Tank ID` == 'BT2' ~ 'Control',
`Tank ID` == 'BT3' ~ 'Heat-stressed',
`Tank ID` == 'BT4' ~ 'Heat-stressed',
`Tank ID` == 'BT5' ~ 'Heat-stressed',
`Tank ID` == 'BT6' ~ 'Control',
`Tank ID` == 'BT7' ~ 'Heat-stressed',
`Tank ID` == 'BT8' ~ 'Control',),
.after = 3) %>%
mutate(`Normalized mean gray value` = `Sample Mean Gray Value`/`Standard Mean Gray Value`*100)
}
# Make a list of the files that you want
list <- list.files(path = "../Measurements",
pattern = '.csv') %>%
discard(.p = ~str_detect(., '_proc.csv')) # Discard the unwanted
# Apply your function to the list of .csv files that you extracted
df_list <- lapply(list,
merge_bleach_data)
# Apply 'bind_rows' to merge the dataframes in your list row-wise
df_list_merged <- do.call(bind_rows, df_list)
# Export data
write_csv(df_list_merged,
'../amil-pre-all.csv')
setwd("C:/Users/jbquijano/OneDrive - University of the Philippines/Academics/Thesis/MMBL/Thesis defense/2024-MSc-thesis-analyses/Figure 1")
mig_data_pre_list <-
list.files(recursive = F,
pattern = '*all-pre_mig-data.csv',
full.names = F)
mig_data_pre_long <-
read_csv(mig_data_pre_list,
id = 'file_name') |>
select(!1) |>
select(!c(3,4))
mig_data_post_list <-
list.files(recursive = F,
pattern = '*all-post_mig-data.csv',
full.names = F)
mig_data_post_long <-
read_csv(mig_data_post_list,
id = 'file_name') |>
select(!1) |>
select(!c(3,4))
mig_data <-
mig_data_pre_long |>
left_join(mig_data_post_long,
by = 'Colony ID')
mig_data_post_long
View(mig_data_post_long)
View(mig_data_pre_long)
mig_adig_pre <-
read_csv('Figure-01-adig-all-pre_mig-data.csv')
View(mig_adig_pre)
rm(a,b)
mig_adig_post <-
read_csv('Figure-01-adig-all-post_mig-data.csv')
mig_amil_pre <-
read_csv('Figure-01-amil-all-pre_mig-data.csv')
mig_amil_post <-
read_csv('Figure-01-amil-all-pre_mig-data.csv')
mig_aten_pre <-
read_csv('Figure-01-aten-all-pre_mig-data.csv')
mig_aten_post <-
read_csv('Figure-01-aten-all-post_mig-data.csv')
View(mig_amil_post)
View(mig_amil_pre)
mig_adig <-
mig_adig_pre |>
left_join(mig_adig_post)
View(mig_adig)
View(mig_adig)
mig_adig <-
mig_adig_pre |>
left_join(mig_adig_post,
by = c(1:4))
mig_adig <-
mig_adig_pre |>
left_join(mig_adig_post,
by = c('Colony ID', 'Tank ID', 'Experiment period', 'Treatment'))
View(mig_adig)
View(mig_adig_post)
View(mig_adig_pre)
View(mig_adig_post)
View(mig_adig_post)
View(mig_adig_pre)
mig_adig <-
mig_adig_pre |>
left_join(mig_adig_post,
by = c('Colony ID',))
mig_adig <-
mig_adig_pre |>
left_join(mig_adig_post,
by = c('Colony ID'))
View(mig_adig)
mig_adig <-
mig_adig_pre |>
mutate(Helper = paste0(1:4))
mig_adig <-
mig_adig_pre |>
mutate('Helper' = paste0(`Colony ID`,
`Tank ID`,
`Experiment period`,
Treatment))
View(mig_adig)
mig_adig <-
mig_adig_pre |>
mutate('Helper' = paste0(`Colony ID`,
`Tank ID`,
`Experiment period`,
Treatment,
collapse = '_'))
mig_adig <-
mig_adig_pre |>
mutate('Helper' = paste0(`Colony ID`,
`Tank ID`,
`Experiment period`,
Treatment,
sep = '_'))
View(mig_adig)
mig_adig <-
mig_adig_pre |>
mutate('Helper' = paste(`Colony ID`,
`Tank ID`,
`Experiment period`,
Treatment,
sep = '_'))
mig_adig_pre_proc <-
mig_adig_pre |>
mutate('Helper' = paste(`Colony ID`,
`Tank ID`,
`Experiment period`,
Treatment,
sep = '_'))
View(mig_adig_pre_proc)
mig_adig_pre_proc <-
mig_adig_pre |>
mutate('Helper' = paste(`Colony ID`,
`Tank ID`,
`Experiment period`,
Treatment,
sep = '_')) |>
select(7,8)
mig_adig_pre_proc <-
mig_adig_pre |>
mutate('Helper' = paste(`Colony ID`,
`Tank ID`,
`Experiment period`,
Treatment,
sep = '_')) |>
select(7,8) |>
rename(Pre = 1)
mig_adig_post_proc <-
mig_adig_post |>
mutate('Helper' = paste(`Colony ID`,
`Tank ID`,
`Experiment period`,
Treatment,
sep = '_')) |>
select(7,8) |>
rename(Post = 1)
View(mig_adig_post_proc)
mig_adig <-
mig_adig_pre_proc |>
left_join(mig_adig_post_proc,
by = c('Helper'))
View(mig_adig)
mig_adig <-
mig_adig_pre_proc |>
left_join(mig_adig_post_proc,
by = 'Helper')
mig_adig <-
mig_adig_pre_proc |>
left_join(mig_adig_post_proc,
by = Helper)
mig_adig <-
mig_adig_pre_proc |>
left_join(mig_adig_post_proc,
by = 'Helper')
mig_adig_pre_proc <-
mig_adig_pre |>
mutate('Helper' = paste(`Colony ID`,
`Tank ID`,
`Experiment period`,
Treatment,
sep = '_')) |>
select(7,8) |>
rename(Pre = 1) |>
relocate(2)
mig_adig_post_proc <-
mig_adig_post |>
mutate('Helper' = paste(`Colony ID`,
`Tank ID`,
`Experiment period`,
Treatment,
sep = '_')) |>
select(7,8) |>
rename(Post = 1)|>
relocate(2)
mig_adig <-
mig_adig_pre_proc |>
left_join(mig_adig_post_proc,
by = 'Helper')
View(mig_adig_post_proc)
mig_adig_post_proc <-
mig_adig_post |>
mutate('Helper' = paste(`Colony ID`,
`Tank ID`,
`Experiment period`,
Treatment,
sep = '_')) |>
mutate(Replicate = c(1:2)) |>
select(7,8) |>
rename(Post = 1)|>
relocate(2)
mig_adig_post_proc <-
mig_adig_post |>
mutate('Helper' = paste(`Colony ID`,
`Tank ID`,
`Experiment period`,
Treatment,
sep = '_')) |>
complete(Replicate = c(1:2)) |>
select(7,8) |>
rename(Post = 1)|>
relocate(2)
mig_adig_post_proc <-
mig_adig_post |>
mutate('Helper' = paste(`Colony ID`,
`Tank ID`,
`Experiment period`,
Treatment,
sep = '_')) |>
mutate(Replicate = rep(c(1,2))) |>
select(7,8) |>
rename(Post = 1)|>
relocate(2)
mig_adig_post_proc <-
mig_adig_post |>
mutate('Helper' = paste(`Colony ID`,
`Tank ID`,
`Experiment period`,
Treatment,
sep = '_')) |>
mutate(Replicate = rep(c(1,2),
length.out = n())) |>
select(7,8) |>
rename(Post = 1)|>
relocate(2)
View(mig_adig_post_proc)
mig_adig_post_proc <-
mig_adig_post |>
mutate('Helper' = paste(`Colony ID`,
`Tank ID`,
`Experiment period`,
Treatment,
sep = '_')) |>
mutate(Replicate = rep(c(1,2),
length.out = n()))
View(mig_adig_post_proc)
mig_adig_post_proc <-
mig_adig_post |>
mutate(Replicate = rep(c(1,2),
length.out = n()))
mig_adig_post_proc <-
mig_adig_post |>
mutate(Replicate = rep(c(1,2),
length.out = n())) |>
mutate('Helper' = paste(`Colony ID`,
`Tank ID`,
`Experiment period`,
Treatment,
Replicate
sep = '_')) |>
mig_adig_post_proc <-
mig_adig_post |>
mutate(Replicate = rep(c(1,2),
length.out = n())) |>
mutate('Helper' = paste(`Colony ID`,
`Tank ID`,
`Experiment period`,
Treatment,
Replicate,
sep = '_')) |>
select(7,8) |>
rename(Post = 1)|>
relocate(2)
mig_adig_post_proc <-
mig_adig_post |>
mutate(Replicate = rep(c(1,2),
length.out = n())) |>
mutate('Helper' = paste(`Colony ID`,
`Tank ID`,
`Experiment period`,
Treatment,
Replicate,
sep = '_'))
mig_adig_post_proc <-
mig_adig_post |>
mutate(Replicate = rep(c(1,2),
length.out = n())) |>
mutate('Helper' = paste(`Colony ID`,
`Tank ID`,
`Experiment period`,
Treatment,
Replicate,
sep = '_'))
mig_adig_post_proc <-
mig_adig_post |>
mutate(Replicate = rep(c(1,2),
length.out = n())) |>
mutate('Helper' = paste(`Colony ID`,
`Tank ID`,
`Experiment period`,
Treatment,
Replicate,
sep = '_')) |>
select(7,9) |>
rename(Post = 1)|>
relocate(2)
mig_adig_pre_proc <-
mig_adig_pre |>
mutate(Replicate = rep(c(1,2),
length.out = n())) |>
mutate('Helper' = paste(`Colony ID`,
`Tank ID`,
`Experiment period`,
Treatment,
Replicate,
sep = '_')) |>
select(7,9) |>
rename(Post = 1)|>
relocate(2)
mig_adig <-
mig_adig_pre_proc |>
left_join(mig_adig_post_proc,
by = 'Helper')
View(mig_adig)
mig_adig_pre_proc <-
mig_adig_pre |>
mutate(Replicate = rep(c(1,2),
length.out = n())) |>
mutate('Helper' = paste(`Colony ID`,
`Tank ID`,
`Experiment period`,
Treatment,
Replicate,
sep = '_')) |>
select(7,9) |>
rename(Pre = 1)|>
relocate(2)
mig_adig <-
mig_adig_pre_proc |>
left_join(mig_adig_post_proc,
by = 'Helper')
View(mig_adig_pre_proc)
mig_adig_pre_proc <-
mig_adig_pre |>
mutate(Replicate = rep(c(1,2),
length.out = n())) |>
mutate('Helper' = paste(`Colony ID`,
`Tank ID`,
Treatment,
Replicate,
sep = '_')) |>
select(7,9) |>
rename(Pre = 1)|>
relocate(2)
mig_adig_post_proc <-
mig_adig_post |>
mutate(Replicate = rep(c(1,2),
length.out = n())) |>
mutate('Helper' = paste(`Colony ID`,
`Tank ID`,
Treatment,
Replicate,
sep = '_')) |>
select(7,9) |>
rename(Post = 1)|>
relocate(2)
mig_adig <-
mig_adig_pre_proc |>
left_join(mig_adig_post_proc,
by = 'Helper')
View(mig_adig_post)
mig_adig_post <-
read_csv('Figure-01-adig-all-post_mig-data.csv') |>
mutate(Replicate = rep(c(1,2),
length.out = n()))
mig_adig_pre <-
read_csv('Figure-01-adig-all-pre_mig-data.csv') |>
mutate(Replicate = rep(c(1,2),
length.out = n()))
View(mig_adig_pre)
View(mig_adig_post)
mig_adig <-
mig_adig_pre |>
left_join(mig_adig_post,
by = c('colony ID',
'Tank ID',
'Treatment',
'Replicate'))
mig_adig <-
mig_adig_pre |>
left_join(mig_adig_post,
by = c('Colony ID',
'Tank ID',
'Treatment',
'Replicate'))
View(mig_adig)
mig_adig <-
mig_adig_pre |>
left_join(mig_adig_post,
by = c('Colony ID',
'Tank ID',
'Treatment',
'Replicate'),
suffix = c("_pre", "_post"))
mig_adig <-
mig_adig_pre |>
left_join(mig_adig_post,
by = c('Colony ID',
'Tank ID',
'Treatment',
'Replicate'),
suffix = c(".pre", ".post"))
View(mig_adig_post)
mig_adig_change <-
mig_adig |>
mutate('% change' = (`Normalized mean gray value.post` - `Normalized mean gray value.pre`)/`Normalized mean gray value.pre` * 100)
View(mig_adig_change)
mig_adig_change <-
mig_adig |>
mutate('% change' = (`Normalized mean gray value.post` - `Normalized mean gray value.pre`)/`Normalized mean gray value.pre` * 100) |>
group_by(1,2,3,4) |>
summarise(mean())
mig_adig_change <-
mig_adig |>
mutate('% change' = (`Normalized mean gray value.post` - `Normalized mean gray value.pre`)/`Normalized mean gray value.pre` * 100) |>
group_by(1,2,3,4) |>
summarise(mean = mean())
mig_adig_change <-
mig_adig |>
mutate('% change' = (`Normalized mean gray value.post` - `Normalized mean gray value.pre`)/`Normalized mean gray value.pre` * 100) |>
group_by(1,2,3,4) |>
summarise('mean' = mean())
mig_adig_change <-
mig_adig |>
mutate('% change' = (`Normalized mean gray value.post` - `Normalized mean gray value.pre`)/`Normalized mean gray value.pre` * 100) |>
group_by(c(1:4)) |>
summarise('mean' = mean())
load('Figure-01.RData')
mig_amil <-
mig_amil_pre |>
left_join(mig_amil_post,
by = c('Colony ID',
'Tank ID',
'Treatment',
'Replicate'),
suffix = c(".pre", ".post"))
pacman::p_load(tidyverse,
broom,
ggbeeswarm,
survminer,
survival)
mig_amil_pre <-
read_csv('Figure-01-amil-all-pre_mig-data.csv') |>
mutate(Replicate = rep(c(1,2),
length.out = n()))
mig_amil_post <-
read_csv('Figure-01-amil-all-post_mig-data.csv') |>
mutate(Replicate = rep(c(1,2),
length.out = n()))
mig_amil <-
mig_amil_pre |>
left_join(mig_amil_post,
by = c('Colony ID',
'Tank ID',
'Treatment',
'Replicate'),
suffix = c(".pre", ".post"))
View(mig_amil)
mig_amil_change <-
mig_amil |>
mutate('% change' = (`Normalized mean gray value.post` - `Normalized mean gray value.pre`)/`Normalized mean gray value.pre` * 100)
mig_amil_change_ave <-
mig_amil_change |>
drop_na() |>
group_by(`Colony ID`, Treatment) |>
summarise('mean' = mean(`% change`))
mig_amil_change_median <-
mig_amil_change |>
drop_na() |>
group_by(`Colony ID`, Treatment) |>
summarise('median' = median(`% change`))
View(mig_amil_change_ave)
View(survival_data_long_hstressed_surv_amil)
View(survival_data_long_hstressed)
View(survival_data_long)
View(survival_data_long)
View(survival_data_long)
View(survival_data_long_hstressed_b)
View(survival_data_long_hstressed_surv_amil)
